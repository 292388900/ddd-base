@startuml

[Infrastructure] #Aqua
[Shared]
note left of Shared : XxxSupport, Utils

package "model package" {
   [Model] <<Domain>>
   [Repository] <<Domain>>
   [Factory] <<Domain>>
}
package "Logic Layer" {
   [Service] <<Domain>>
   [Event] <<Domain>>
   [Application]
   note right of Application : open service\nimplementation and deploy
}

package "SOA Client" {
   [OpenService]
   note right of OpenService : models, open service api
}

package "App Layer" {
    [WebApp] <<App>>
    [MobileBackend] <<App>>
    [Interface] <<App>>
    [MobileApp] <<App>>
}

[Shared] --> [Infrastructure]
[Repository] --> [Shared]
[Repository] --> [Model]
[Service] -[#0000FF]> [Repository]
[Factory] --> [Model]
[Event] -[#0000FF]> [Service]
[Event] -[#0000FF]> [Repository]
[Application] -[#0000FF]> [Repository]
[Application] -[#0000FF]> [Service]
[Application] -[#0000FF]> [Event]
[Application] ....> [Infrastructure]
[Application] ....> [Shared]

[OpenService] ..> [Application]: RPC

[WebApp] ..> [OpenService]
[Interface] --> [WebApp]
[MobileBackend] ..> [OpenService]
[MobileApp] --> [MobileBackend]

skinparam component {
  FontSize 13
  BackgroundColor<<Domain>> gold
  BackgroundColor<<App>> DarkKhaki
  FontName Courier
}

@enduml